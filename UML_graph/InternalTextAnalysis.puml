@startuml System_Sequence_Diagrams_internal_TextAnalysis
!include Graphic.puml
actor User
participant "Sentence" as S1
participant "Generator" as Main
participant "Analyzer" as ApiGoogle
participant Dictionary

== Input and Analysis ==
User -> S1 **: create(inputText)
activate S1
S1 -> Main: analyze(inputText)
activate Main

Main -> ApiGoogle: analyzeSentence(inputText)
activate ApiGoogle
ApiGoogle --> Main: return List<Token>
deactivate ApiGoogle

== Dictionary Update ==
loop for each token in nouns
    Main -> Dictionary: existsNoun(token)
    activate Dictionary
    alt token not found
        Dictionary --> Main: return false
        Main -> Dictionary: saveNoun(token)
        Dictionary --> Main: confirmSave
    else token exists
        Dictionary --> Main: return true
    end
end

loop for each token in adjectives
    Main -> Dictionary: existsAdjective(token)
    alt token not found
        Dictionary --> Main: return false
        Main -> Dictionary: saveAdjective(token)
        Dictionary --> Main: confirmSave
    else token exists
        Dictionary --> Main: return true
    end
end

loop for each token in verbs
    Main -> Dictionary: existsVerb(token)
    alt token not found
        Dictionary --> Main: return false
        Main -> Dictionary: saveVerb(token)
        Dictionary --> Main: confirmSave
    else token exists
        Dictionary --> Main: return true
    end
    deactivate Dictionary
end

Main --> User: return "Analysis complete"
deactivate Main
deactivate S1

@enduml